@model AssociationBids.Portal.Model.PropertyModel
@using AssociationBids.Portal.Common
@{
    ViewBag.Title = "View Property";
    Layout = "~/Views/Shared/_Layout.cshtml";
    string Errormessage = Convert.ToString(TempData["Errormessage"]);
}

<script src="~/Scripts/jquery-3.4.1.min.js"></script>
<script src="~/Scripts/jquery-3.4.1.js"></script>

<link href="~/assets/plugins/fileuploads/css/dropify.css" rel="stylesheet" />
<link href="~/Content/themes/assets/plugins/fileuploads/css/dropify.css" rel="stylesheet" />
<link href="~/assets/plugins/fileuploads/css/dropify.min.css" rel="stylesheet" />
<script src="~/assets/plugins/fileuploads/js/dropify.js"></script>
<script src="~/assets/plugins/fileuploads/js/dropify-demo.js"></script>
<script src="~/assets/plugins/fileuploads/js/dropify.min.js"></script>
<style>
    div#ManagerChoosen_chosen {
        width: 100% !important;
    }

    .selector_ED {
        width: auto !important;
    }

    .chosen-container-multi .chosen-choices li.search-choice .search-choice-close {
        background: url('../../Content/themes/cancelimg.jpg');
    }

    .chosen-select placeholder_text {
        padding: 5px;
    }

    .Error {
        color: red;
    }

    @@media (min-width: 768px) and (max-width: 991px) {
        /* Show 4th slide on md if col-md-4*/
        .carousel-inner .active.col-md-4.carousel-item + .carousel-item + .carousel-item + .carousel-item {
            position: absolute;
            top: 0;
            right: -33.3333%; /*change this with javascript in the future*/
            z-index: -1;
            display: block;
            visibility: visible;
        }
    }

    @@media (min-width: 576px) and (max-width: 768px) {
        /* Show 3rd slide on sm if col-sm-6*/
        .carousel-inner .active.col-sm-6.carousel-item + .carousel-item + .carousel-item {
            position: absolute;
            top: 0;
            right: -50%; /*change this with javascript in the future*/
            z-index: -1;
            display: block;
            visibility: visible;
        }
    }

    @@media (min-width: 576px) {
        .carousel-item {
            margin-right: 0;
        }
        /* show 2 items */
        .carousel-inner .active + .carousel-item {
            display: block;
        }

        .carousel-inner .carousel-item.active:not(.carousel-item-right):not(.carousel-item-left),
        .carousel-inner .carousel-item.active:not(.carousel-item-right):not(.carousel-item-left) + .carousel-item {
            transition: none;
        }

        .carousel-inner .carousel-item-next {
            position: relative;
            transform: translate3d(0, 0, 0);
        }
        /* left or forward direction */
        .active.carousel-item-left + .carousel-item-next.carousel-item-left,
        .carousel-item-next.carousel-item-left + .carousel-item,
        .carousel-item-next.carousel-item-left + .carousel-item + .carousel-item {
            position: relative;
            transform: translate3d(-100%, 0, 0);
            visibility: visible;
        }
        /* farthest right hidden item must be also positioned for animations */
        .carousel-inner .carousel-item-prev.carousel-item-right {
            position: absolute;
            top: 0;
            left: 0;
            z-index: -1;
            display: block;
            visibility: visible;
        }
        /* right or prev direction */
        .active.carousel-item-right + .carousel-item-prev.carousel-item-right,
        .carousel-item-prev.carousel-item-right + .carousel-item,
        .carousel-item-prev.carousel-item-right + .carousel-item + .carousel-item {
            position: relative;
            transform: translate3d(100%, 0, 0);
            visibility: visible;
            display: block;
            visibility: visible;
        }
    }
    /* MD */
    @@media (min-width: 768px) {
        /* show 3rd of 3 item slide */
        .carousel-inner .active + .carousel-item + .carousel-item {
            display: block;
        }

        .carousel-inner .carousel-item.active:not(.carousel-item-right):not(.carousel-item-left) + .carousel-item + .carousel-item {
            transition: none;
        }

        .carousel-inner .carousel-item-next {
            position: relative;
            transform: translate3d(0, 0, 0);
        }
        /* left or forward direction */
        .carousel-item-next.carousel-item-left + .carousel-item + .carousel-item + .carousel-item {
            position: relative;
            transform: translate3d(-100%, 0, 0);
            visibility: visible;
        }
        /* right or prev direction */
        .carousel-item-prev.carousel-item-right + .carousel-item + .carousel-item + .carousel-item {
            position: relative;
            transform: translate3d(100%, 0, 0);
            visibility: visible;
            display: block;
            visibility: visible;
        }
    }
    /* LG */
    @@media (min-width: 991px) {
        /* show 4th item */
        .carousel-inner .active + .carousel-item + .carousel-item + .carousel-item {
            display: block;
        }

        .carousel-inner .carousel-item.active:not(.carousel-item-right):not(.carousel-item-left) + .carousel-item + .carousel-item + .carousel-item {
            transition: none;
        }
        /* Show 5th slide on lg if col-lg-3 */
        .carousel-inner .active.col-lg-3.carousel-item + .carousel-item + .carousel-item + .carousel-item + .carousel-item {
            position: absolute;
            top: 0;
            right: -25%; /*change this with javascript in the future*/
            z-index: -1;
            display: block;
            visibility: visible;
        }
        /* left or forward direction */
        .carousel-item-next.carousel-item-left + .carousel-item + .carousel-item + .carousel-item + .carousel-item {
            position: relative;
            transform: translate3d(-100%, 0, 0);
            visibility: visible;
        }
        /* right or prev direction //t - previous slide direction last item animation fix */
        .carousel-item-prev.carousel-item-right + .carousel-item + .carousel-item + .carousel-item + .carousel-item {
            position: relative;
            transform: translate3d(100%, 0, 0);
            visibility: visible;
            display: block;
            visibility: visible;
        }
    }
</style>
<h2>View Property</h2>

<div class="app-content  my-3 my-md-5">
    <div class="side-app">

        <!-- page-header -->
        <div class="page-header">
            <ol class="breadcrumb">
                <!-- breadcrumb -->
                <li class="breadcrumb-item">  @Html.ActionLink("Management Companies", "ACompanylist", "ACompanyManagement", new { })</li>
                <li class="breadcrumb-item">@Html.ActionLink("Management Company Detail", "companydefaultView", "ACompanyManagement", new { @CompanyKey = Convert.ToString(Session["ViewCompanyFromList"]) }, new { })</li>
                <li class="breadcrumb-item active" aria-current="page">Property Details</li>
            </ol><!-- End breadcrumb -->
        </div>
        <!-- End page-header -->
        @if (!string.IsNullOrEmpty(Errormessage))
        {
        <p class="alert alert-danger alert-dismissible">
            @Errormessage
            <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
        </p>
        }
        <div class="row">
            @Html.HiddenFor(Model => Model.ResourceKey);
            <div class="col-12">
                <div class="card">

                    <div class="card-body">

                        <div class="form-div">

                            <div class="row">
                                <div class="col-md-12">
                                    @*<a href="add-bidrequest.html" class="btn btn-info " title="Add Bid Request"><i class="fe fe-plus"></i> Add Bid Request</a>
                                    <a href="add-workorders.html" class="btn btn-info " title="Add work order"><i class="fe fe-plus"></i> Add Work Order</a>*@
                                </div>
                            </div>
                            <br />
                            <div class="row">
                                <div class="col-12">
                                    <div class="card">

                                        <div class="card-header">
                                            <h3 class="card-title">Property Detail</h3>
                                            <div class="card-options">
                                                <a onclick="EditPage();" class="btn btn-primary ml-auto text-white pull-right" title="Edit"><i class="fa fa-pencil"></i> Edit</a>
                                                <a style="margin-left: 10px;" href="#" class="card-options-collapse mr-2" data-toggle="card-collapse"><i class="fe fe-chevron-up"></i></a>
                                            </div>

                                        </div>
                                        <div class="card-body border-top">

                                            <div class="row">
                                                <div class="col-md-6">
                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <div class="form-group">
                                                                <label class="form-label">Title</label>
                                                                @Html.Label("", Model.Title)
                                                                @Html.HiddenFor(model => model.PropertyKey)

                                                            </div>
                                                        </div><!-- end of col -->

                                                        <div class="col-md-12">
                                                            <div class="form-group">
                                                                <label class="form-label"># No. of Units</label>
                                                                <p>@Utility.FormatNumberHelper(Model.NumberOfUnits,false)</p>

                                                            </div>
                                                        </div><!-- end of col -->
                                                        <div class="col-md-12">
                                                            <div class="form-group">
                                                                <label class="form-label">Description</label>
                                                                <p id="Description"></p>
                                                            </div>
                                                        </div><!-- end of col -->
                                                    </div><!--end of row -->
                                                </div><!-- end of col -->
                                                <div class="col-md-6">
                                                    <div class="bidreq-box">
                                                        <div class="row">
                                                            <h4 class="box-title">Default Bid Request Amount</h4>

                                                            <div class="col-md-12">
                                                                <div class="form-group">
                                                                    <label class="form-label">Bid Request Amount</label>
                                                                    <p>@Utility.FormatNumberHelper(Model.BidRequestAmount,true)</p>
                                                                </div>
                                                            </div><!-- end of col -->
                                                            <div class="col-md-12">
                                                                <div class="form-group">
                                                                    <label class="form-label">Min. Insurance Amount</label>
                                                                    <p>@Utility.FormatNumberHelper(Model.MinimumInsuranceAmount,true)</p>
                                                                </div>
                                                            </div><!-- end of col -->

                                                        </div><!-- end of row-->
                                                    </div><!-- end of bidreq-box -->
                                                </div><!-- end of col -->
                                            </div><!-- end of row -->

                                            <hr />
                                            <div class="row">


                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <label class="form-label">Address 1</label>
                                                        <p>@Model.Address</p>
                                                    </div>
                                                </div><!-- end of col -->
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <label class="form-label">Address 2</label>
                                                        <p>@Model.Address2</p>
                                                    </div>
                                                </div><!-- end of col -->

                                                <div class="col-md-4">
                                                    <div class="form-group">
                                                        <label class="form-label">City</label>
                                                        @Html.Label("", Model.City)
                                                    </div>
                                                </div><!-- end of col -->
                                                <div class="col-md-4">
                                                    <div class="form-group">
                                                        <label class="form-label">State</label>
                                                        @Html.Label("", Model.State)
                                                    </div>
                                                </div><!-- end of col -->

                                                <div class="col-md-4">
                                                    <div class="form-group">
                                                        <label class="form-label">Zip</label>
                                                        @Html.Label("", Model.Zip)
                                                    </div>
                                                </div><!-- end of col -->
                                            </div>
                                        </div><!-- card body end -->
                                    </div><!-- card end -->

                                    <div class="row">
                                        <div class="col-12">
                                            <div class="card">

                                                <div class="card-header">
                                                    <h3 class="card-title">Photo</h3>
                                                    <div class="popback" style="height:auto;width:70%; background-color:whitesmoke;position:absolute;top:50px; left:170px; z-index:100;padding-bottom: 31px; ">
                                                        <button type="button" class="btn btn-md btn-danger closepop pull-right" style=" font-size:10px;" onclick="myclick()" id="btnclose">&times;</button>

                                                        <div id="image"></div>

                                                    </div>

                                                </div>
                                                <div class="card-body border-top">

                                                    <div class="row">
                                                        <div class="col-md-12">
                                                            <div class="row">
                                                                @foreach (var images in Model.img)
                                                                {

                                                                if (images == null)

                                                                {

                                                                }
                                                                else
                                                                {
                                                                <img src="@Url.Content(images)" alt="Hejsan" style="width:200px; padding-top:26px; padding-left:26px; cursor:pointer;" onclick="viewimage(this.src);" />
                                                                }

                                                                }
                                                            </div><!--end of row -->
                                                        </div><!-- end of col -->

                                                    </div><!-- end of row -->

                                                </div><!-- card body end -->
                                            </div><!-- card end -->
                                        </div><!-- col end -->
                                    </div>


                                </div><!-- col end -->
                            </div><!-- row end -->
                        </div><!-- end of row -->


                        <div class="row">
                            <div class="col-12">
                                <div class="card">
                                    <div class="card-body">
                                        <div class="button-row d-flex">
                                            <button class="btn btn-primary ml-auto" type="button" data-toggle="modal" data-target="#uploadmodal" title="Upload">+ Add <i class="fe fe-upload"></i></button>
                                        </div>
                                        <hr />
                                        <div class="table-responsive" id="divFileUploader">
                                            <table id="dataTableExample" class="table table-striped table-bordered w-100 dataTable no-footer">
                                                <thead>
                                                    <tr>
                                                        <th>Document</th>
                                                        <th width="5%"></th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr id="HeaderId">
                                                        <td>

                                                            <a target="_blank" href="#" class="upd-fl" style="cursor: pointer;text-decoration:none;"></a>

                                                        </td>
                                                        <td align="center">
                                                            <a title="Delete" onclick="removeDoc(this);"><i class="fe fe-trash redtxt font18"></i></a>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>

                                        </div><!-- end of table responsive -->
                                        <!-- Modal -->


                                        <div class="modal fade" id="uploadmodal" tabindex="-1" role="dialog" aria-labelledby="uploadmodalLabel" aria-hidden="true">
                                            <div class="modal-dialog" role="document">
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <h5 class="modal-title" id="uploadmodalLabel">Upload</h5>
                                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                            <span aria-hidden="true">×</span>
                                                        </button>
                                                    </div>
                                                    <div class="modal-body">
                                                        <div class="row">
                                                            <div class="col-md-12">
                                                                <div class="form-group">
                                                                    <label class="form-label">Upload Files</label>
                                                                    @*<input type="file" id="Files" class="dropify" multiple />*@
                                                                    <input id="txtfile1" type="file" accept=".pdf, .txt, .doc, .docx, .xls,.xlsx, .jpg,.jpeg, .png, .tif, .bmp" multiple="true" placeholder="Browse your files" class="dropify" />
                                                                    @*<input id="Files" type="file" class="dropify" accept=".pdf, .txt, .doc, .docx, .xls,.xlsx, .jpg,.jpeg, .png, .tif, .bmp,.html" multiple />*@
                                                                </div>
                                                            </div><!-- end of col -->
                                                        </div>
                                                    </div>
                                                    <div class="modal-footer">
                                                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                                        <button type="button" class="btn btn-primary" id="btnUpload" data-dismiss="modal">Upload</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div><!-- end Modal -->




                                    </div><!-- end of card body -->
                                    <div class="card-footer">
                                        <div class="button-row d-flex">
                                        </div>
                                    </div>
                                </div><!-- end of card -->
                            </div><!-- end of col -->
                        </div><!-- end of row -->
                        <!--single form panel-->
                        <div class="row">
                            <div class="col-12">
                                <div class="card">
                                    <div class="card-body">
                                        <div class="clearfix">
                                            <a href="javascript:void(0);" class="btn btn-primary pull-right" data-toggle="modal" id="btnaddmanager" data-target="#addmanagers" title="Add Manager" onclick="return Manager()">+Add Manager</a>
                                            @*<a onclick=" Editmanager();" class="btn btn-primary ml-auto text-white pull-right" title="Edit"><i class="fa fa-pencil"></i> Edit Manager</a>*@

                                        </div>
                                        <br />
                                        <div class="table-responsive" id="managerdiv">
                                            <table id="dataTableExample" class="table table-striped table-bordered w-100 dataTable no-footer">
                                                <thead>
                                                    <tr>
                                                        <th>Assigned Managers</th>
                                                        <th width="5%"></th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr>
                                                        <td>
                                                            <span class="manspan"></span>
                                                            <span class="manspanId" style="display:none;"></span>
                                                        </td>
                                                        <td align="center"><a title="Delete" onclick="removemanager(this);"><i class="fe fe-trash redtxt font18"></i></a></td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                            @*<a onclick="Updatemanager();" class="btn btn-primary ml-auto  pull-right" title="Edit"><i class="fa fa-upload"></i>Update</a>*@

                                        </div><!-- end of table responsive -->
                                        <hr />
                                    </div><!-- end of card body -->
                                    <div class="card-footer">
                                        <div class="button-row d-flex">

                                        </div>
                                    </div>
                                </div><!-- end of card -->
                            </div><!-- end of card -->
                        </div>
                        <div class="card-footer" style="border:none;">
                            <a href="@Url.Action("companydefaultView","ACompanyManagement")?CompanyKey=@Model.CompanyKey" class="btn btn-info " style="float:right;">
                                <i class="fe fe-skip-back"></i>&#x20;Back
                            </a>
                        </div>

                        <!-- end of col -->
                        <!-- Message Modal -->
                        <div class="modal fade" id="addmanagers" tabindex="-1" role="dialog" aria-hidden="true">
                            <div class="modal-dialog" role="document">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title" id="addmanagers3">Assigned Managers</h5>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span aria-hidden="true">&times;</span>
                                        </button>
                                    </div>
                                    <div class="modal-body">
                                        @*<form>
                                            *@
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <div class="alert alert-danger" id="Errorformanagerpopup" style="display:none; margin-top: 20px;">
                                                        <strong><span class="errormessage"></span></strong>
                                                    </div>
                                                    <div class="form-group">
                                                        <label class="form-label">Managers @Html.ValidationMessageFor(model => model.MinimumInsuranceAmount, "*", new { @class = "text-danger" })</label>
                                                        @Html.HiddenFor(model => model.ResourceKey)
                                                        @Html.DropDownList("ManagerChoosen", new SelectList(ViewBag.lstmanager, "Value", "Text"), new { @data_rel = "Choose_one", @class = "form-control chosen-select", @placeholder = "Please Select...", @multiple = "true", @onchange = "AddMan()" })
                                                        @Html.DropDownList("ManagerChoosen1", new SelectList(ViewBag.lstmanager, "Value", "Text"), new { @data_rel = "form-control Choose_one", @class = "form-control chosen-select", @placeholder = "Please Select...", @multiple = "true" })
                                                        @*@Html.DropDownList("ManagerChoosen", (List<SelectListItem>
                                                            )ViewBag.lstmanager, new { @class = "form-control chosen-select", multiple = "multiple" })*@
                                                            @*@html.dropdownlist("managerchoosen", new selectlist(viewbag.lstmanager, "value", "text"), new { @class = "form-control chosen-select", @multiple = "true", placeholder = "please choose " })*@
                                                    </div>
                                                </div>
                                            </div><!-- end of row -->
                                            @*
                                        </form>*@
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                                        <button type="button" class="btn btn-primary" data-dismiss="modal" id="btnadd">+ Add</button>
                                    </div>
                                </div>
                            </div>
                        </div><!
                        <!-- row end -->
                    </div><!-- end of form-div  -->

                </div><!--end of card body -->
            </div>
        </div>
    </div>

    <footer class="footer">
        <div class="container">
            <div class="row align-items-center flex-row-reverse">
                <div class="col-lg-12 col-sm-12   text-center">
                    Copyright © 2020 Association Bids. All rights reserved.
                </div>
            </div>
        </div>
    </footer>


</div><!--End side app-->

<a href="#top" id="back-to-top"><i class="fa fa-angle-up"></i></a>

<link rel="stylesheet" href="../assets/css/cust-wizard.css">
<link href="../assets/plugins/fileuploads/css/dropify.css" rel="stylesheet" type="text/css" />
<script src="../assets/js/cust-wizard.js"></script>
<script src="~/Content/themes/assets/js/vendors/jquery-3.2.1.min.js"></script>
<script src="../assets/plugins/fileuploads/js/dropify.js"></script>
<script src="../assets/plugins/fileuploads/js/dropify-demo.js"></script>

<script>
    $(document).ready(function () {
        var Description = '@Model.Description';
        var Descriptions = Description.replace(/&lt;br&gt;/g, "<br/>");
        $('#Description').html(Descriptions);
         bindDocument();
         bindmanager();
         $('#Latitude').val('');
         $('#Longitude').val('');
         $(".chosen-select").chosen();
         $('#loader').show();
         $('.errormessage').html('');
         $("#Error").hide();
         $('#HeaderId').hide();
         $('#DocumentId').hide();
         $("#news_date").datepicker();
         $("#Errorformanager").hide();
         $('#Errorformanagerpopup').hide();
         $('#loader').hide();

         $(".popback").hide();
         $(".fullblack").hide();
         $('#Errorformanagerpopup').hide();
        $(".advance_search").click(function () {
            $("#advancesearch3").toggle(500);
        });
        $(".overlayclose").click(function () {
            $("#advancesearch3").hide();
        });

    });

    function myclick() {

        $(".popback").hide();
        $(".fullblack").hide();

    }
    function viewimage(imgsrc) {
        debugger;

        $(".popback").show();
        $(".fullblack").show();

        $('#image').html("<img src='" + imgsrc + "' style= 'width:85%; margin-left:49px;margin-top:31px;' />");

    }

    function AddMan() {
        if ($('.search-choice').length != 0) {

            $('#btnadd').prop('disabled', false);
        }
    }

    function EditPage() {
        window.location.href = 'APMPropertyEdit?PropertyKey=' + $("#PropertyKey").val();

    }

    function download(src) {
        alert(src);
        var strWindowFeatures = "location=yes,height=570,width=520,scrollbars=yes,status=yes";
        window.open(src, "_blank", strWindowFeatures);
    }

    function Editmanager() {
        window.location.href = 'APMAcessEdit?PropertyKey=' + $("#PropertyKey").val();

    }
    $("#btncancel").click(function () {
        var a = $("#PropertyKey").val();

        window.location.href = 'APropertiesView?PropertyKey=' + $("#PropertyKey").val();

    });


    $("#btnUpload").click(function () {

        debugger;
        $('#loader').show();
        var formData = new FormData();
        var totalFiles = document.getElementById("txtfile1").files.length;
        for (var i = 0; i < totalFiles; i++) {
            var file = document.getElementById("txtfile1").files[i];
            formData.append("Files", file);
        }
        formData.append("PropertyKey", $("#PropertyKey").val());

        $.ajax({
            type: 'POST',
            datatype: 'json',
            url: '@Url.Action("DocUpload", "ACompanyManagement")',
            data: formData,
             contentType:false,
             processData: false,
          success: function (respo)
          {
            if (respo == "sucess")
            {
                $('#loader').hide();
                window.location.href = 'APropertiesView?PropertyKey=' + $("#PropertyKey").val();

            }
            else if (respo == "Error")
            {
                $('#loader').hide();
                window.location.href = 'APropertiesView?PropertyKey=' + $("#PropertyKey").val();

            }
          },
        });

    });


    $("#btnaddmanager").click(function () {
        debugger;
        $('#ManagerChoosen1_chosen').hide();
        if ($(".manspan").text() == $('#ManagerChoosen_chosen').text());
        {
            $('#btnadd').prop('disabled', true);
        }
;
    });


    $("#btndelete").click(function () {
        window.location.href = 'Delete?PropertyKey=' + $("#PropertyKey").val();

    });
    $("#btnadd").click(function () {
        $('#ManagerChoosen1_chosen').hide();
          $("#managerdiv table tbody tr:eq(0)").show();
           var SelectedManager = $("#ManagerChoosen option:selected").map(function () {
            var cln = $("#managerdiv table tbody tr:eq(0)").clone(true);
            $(".manspan", cln).html($(this).text());
            $(".manspanId", cln).html($(this).val());
            $("#managerdiv table").append(cln);

        }).get();

        $("#managerdiv table tbody tr:eq(0)").hide();

        if ($('#ManagerChoosen_chosen').find('.chosen-choices').find('.search-choice').length == 0) {
            $('.errormessage').html('Please select manager.');
            $('#Errormanager').show();
            return false;
        }
        else {
            var SelectedManager = $("#ManagerChoosen option:selected").map(function () {
                return $(this).val();
            }).get().join(',');
            $('#ResourceKey').val(SelectedManager);
        }

        Updatemanager();
    });


    $("#AddImages").click(function () {

        $("#managerdiv table tbody tr:eq(0)").show();
        var SelectedManager = $("#ManagerChoosen option:selected").map(function () {
            var cln = $("#managerdiv table tbody tr:eq(0)").clone(true);
            $(".manspan", cln).html($(this).text());
            $(".manspanId", cln).html($(this).val());
            $("#managerdiv table").append(cln);

        }).get();

        $("#managerdiv table tbody tr:eq(0)").hide();

        if ($('#ManagerChoosen_chosen').find('.chosen-choices').find('.search-choice').length == 0) {
            $('.errormessage').html('Please select manager.');
            $('#Errormanager').show();
            return false;
        }
        else {
            var SelectedManager = $("#ManagerChoosen option:selected").map(function () {
                return $(this).val();
            }).get().join(',');
            $('#ResourceKey').val(SelectedManager);
        }

    });



    function validation() {
        debugger;

        var IsValid = true;
        $('.errormessage').html('');
        var errormessage = '';

        if ($("#Title").val() == "") {

            errormessage = $('.errormessage').html();
            $('#Error').show();
            IsValid = false;
        }

        if ($('#NumberOfUnits').val() == "0") {


            $('#Error').show();
            IsValid = false;
        }

        if ($('#Description').val() == "") {

            IsValid = false;
            $('#Error').show();
        }

        if ($('#Address').val() == "") {

            IsValid = false;
            $('#Error').show();
        }


        if ($('#Address2').val() == "") {

            $('#Error').show();
            IsValid = false;
        }

        if ($('#City').val() == "") {

            $('#Error').show();
            IsValid = false;
        }

        if ($('#State').val() == "") {

            IsValid = false;
            $('#Error').show();
        }

        if ($('#Zip').val() == "") {

            IsValid = false;
            $('#Error').show();
        }

        if ($('#BidRequestAmount').val() == "") {

            IsValid = false;
            $('#Error').show();
        }

        if ($('#MinimumInsuranceAmount').val() == "") {

            IsValid = false;
            $('#Error').show();
        }
        if (!IsValid)
            $("html, body").animate({ scrollTop: 0 }, "slow");

        $('#loader').hide();
        return IsValid;
    }


     function removeDoc(me) {
        debugger;
        var m = $(me).parent("td").parent("tr").find('.upd-fl').text();

        var a = $("#PropertyKey").val();
        var b = $(me).parent("td").parent("tr").find('.upd-fl').text();
        window.location.href = "DocumentDelete?PropertyKey=" + a + "&Docname=" + b;
    }


    function removemanager(me) {

        debugger;
        var m = $(me).parent("td").parent("tr").find('.manspanId').val();

        var a = $("#PropertyKey").val();
        var b = $(me).parent("td").parent("tr").find('.manspanId').html();

        window.location.href = "ManagerDelete?PropertyKey=" + a + "&managername=" + b;
    }



      function Updatemanager_Old() {
          debugger;
          $('#ManagerChoosen1_chosen').hide();
        var SelectedManager = $("#ManagerChoosen option:selected").map(function () {
            return $(this).val();
        }).get().join(',');
        $('#ResourceKey').val(SelectedManager);
        var b = $('#ResourceKey').val(SelectedManager);

        var a = $("#PropertyKey").val();
        var b = $('#ResourceKey').val();
        window.location.href = "UpdateManager?PropertyKey=" + a + "&managername=" + b;
    }

    function Updatemanager() {
        $('#loader').show();
        debugger;
        $('#ManagerChoosen1_chosen').hide();
        var SelectedManager = $("#ManagerChoosen option:selected").map(function () {
            return $(this).val();
        }).get().join(',');
        $('#ResourceKey').val(SelectedManager);
        var b = $('#ResourceKey').val(SelectedManager);

        var a = $("#PropertyKey").val();
        var b = $('#ResourceKey').val();
        $.ajax({
            type: "GET",
            datatype: 'json',
            url: '@Url.Action("JsonUpdatemanager", "PMProperties")',
            data: { PropertyKey: a, managername: b },
            success: function (response) {
                if (response.value != "0") {
                    bindmanager();
                } else {

                }
            }
        });
        $('#loader').hide();
    }



    function bindmanager()
    {

         $.ajax({
            url: '@Url.Action("GetAllGroupManagers", "ACompanyManagement")',
            cache: false,
             data:
             {
              PropertyKey: $('#PropertyKey').val()
            },
            success: function (response)
            {

                $("#managerdiv table tbody tr:not(:first)").remove();
                $("#managerdiv table tbody tr:eq(0)").show();
                for (var i = 0; i < response.length; i++)
                {
                    var cln = $("#managerdiv table tbody tr:eq(0)").clone(true);
                    $(".manspan", cln).html(response[i].Name);
                    $(".manspanId", cln).html(response[i].ResourceKey);
                    $("#managerdiv table").append(cln);
                }
                $("#managerdiv table tbody tr:eq(0)").hide();
            }
        });
    }
    function Manager()
    {

        setTimeout(function () {
            var options = [];
            options.push('0');
            $('#btnadd').prop('disabled', true);
            $('#ManagerChoosen1_chosen').hide();
            // $('.chosen-choices').hide();
            $('#managerdiv table tbody tr:not(:first-child)').each(function (i, e) {
                options.push($(e).find('td:eq(0)').find('span.manspanId').html());
            });
            $('#ManagerChoosen').val(options).trigger("liszt:updated");
            $('#ManagerChoosen').val(options).trigger("chosen:updated");
        }, 200);
    }
      function bindDocument()
      {
         $.ajax({
            url: '@Url.Action("bindDocument", "ACompanyManagement")',
            cache: false,
             data:
              {
                PropertyKey: $('#PropertyKey').val()
              },
            success: function (response)
            {

                $("#divFileUploader table tbody tr:not(:first)").remove();
                $("#divFileUploader table tbody tr:eq(0)").show();
                //for (var i = 0; i < response.length; i++)
                //{
                //    var cln = $("#divFileUploader table tbody tr:eq(0)").clone(true);
                //    $(".upd-fl", cln).html(response[i].FileName);
                //    $("#divFileUploader table").append(cln);
                //}
                for (var i = 0; i < response.length; i++) {
                    debugger;
                    var namearray = response[i].split($("#ResourceKey").val());
                    var datearray = response[i].split($('#ResourceKey').val());
                    var extension = $('#PropertyKey').val()+" " + datearray[1];
                    var name = namearray[1];
                    //if (extension === 'jpg' || extension === 'png' || extension === 'gif') {
                    var table = $("#divFileUploader table tbody tr:eq(0)").clone(true);
                    $(".upd-fl", table).html(name);
                    $(".upd-fl", table).attr('src', '"../ Document / Properties /"' + extension);
                    $(".upd-fl", table).attr('href', "../Document/Properties/"  + extension);
                    $(".upd-fl", table).attr('onclick', "download('../Document/Properties/" + extension + "')");
                    $("#divFileUploader table").append(table);

                    //} else {
                    //    var table = $("#divFileUploader table tbody tr:eq(0)").clone(true);
                    //    //$("#docname", table).html(response[i].FileName);
                    //    $(".upd-fl", table).html(response[i].FileName);
                    //    $(".upd-fl", table).attr('href', response[i]);
                    //    //$("#docname", table).attr('onclick', "ViewDoc(" + response[i].DocumentKey + "," + response[i].ObjectKey + ",'" + response[i].FileName + "')");
                    //    $("#divFileUploader table").append(table);
                    //}
                }
                $("#divFileUploader table tbody tr:eq(0)").hide();
            }
        });
    }




    function readURL(input) {


        $("#divFileUploader table tbody tr:eq(0)").show();
        for (var i = 0; i < input.files.length; i++) {
            var cln = $("#divFileUploader table tbody tr:eq(0)").clone(true);
            $(".upd-fl", cln).html(input.files[i].name);
            $("#divFileUploader table").append(cln);
        }
        $("#divFileUploader table tbody tr:eq(0)").hide();
    }


    $("#txtfile1").change(function () {

        readURL(this);
    });

    $('#carousel-example').on('slide.bs.carousel', function (e) {
        /*
            CC 2.0 License Iatek LLC 2018 - Attribution required
        */
        var $e = $(e.relatedTarget);
        var idx = $e.index();
        var itemsPerSlide = 5;
        var totalItems = $('.carousel-item').length;

        if (idx >= totalItems - (itemsPerSlide - 1)) {
            var it = itemsPerSlide - (totalItems - idx);
            for (var i = 0; i < it; i++) {
                // append slides to end
                if (e.direction == "left") {
                    $('.carousel-item').eq(i).appendTo('.carousel-inner');
                }
                else {
                    $('.carousel-item').eq(0).appendTo('.carousel-inner');
                }
            }
        }
    });

</script>


